{% extends 'base.html.twig' %}
{% block title %} Forum {% endblock %}
{% block cssIncludes %}
    <link href="/forum/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom -->
    <link href="/forum/css/custom.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="/forum/css/style.css" />

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- fonts -->
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/forum/font-awesome-4.0.3/css/font-awesome.min.css">
    <!-- CSS STYLE-->
    <link rel="stylesheet" type="text/css" href="/forum/css/style.css" media="screen" />

    <!-- SLIDER REVOLUTION 4.x CSS SETTINGS -->
    <link rel="stylesheet" type="text/css" href="/forum/rs-plugin/css/settings.css" media="screen" />

{% endblock %}


{% block main %}


    <div class="container-fluid">

        <!-- Slider -->
        <div class="tp-banner-container">
            <div class="tp-banner" >
                <ul>
                    <!-- SLIDE  -->
                    <li data-transition="fade" data-slotamount="7" data-masterspeed="1500" >
                        <!-- MAIN IMAGE -->
                        <img src="/images/resource/mslider1.jpg"  alt="slidebg1"  data-bgfit="cover" data-bgposition="left top" data-bgrepeat="no-repeat">
                        <!-- LAYERS -->
                    </li>
                </ul>
            </div>
        </div>
        <!-- //Slider -->

        <div class="headernav">
            <div class="container">
                <div class="row">
                    <div class="col-lg-1 col-xs-3 col-sm-2 col-md-2 logo "><a href="/forum/index.html"><img src="/forum/images/logo.jpg" alt=""  /></a></div>
                    <div class="col-lg-3 col-xs-9 col-sm-5 col-md-3 selecttopic">
                        <div class="dropdown">
                            <a  href="{{ path('forum_homepage') }}" >Forum Posts</a> <b class="caret"></b>
                        </div>
                    </div>
                    <div class="col-lg-4 search hidden-xs hidden-sm col-md-3">
                        <div class="wrap">
                            <form action="#" method="post" class="form">
                                <div class="pull-left txt"><input id="searchInput" onchange="mySearch();" type="text" class="form-control" placeholder="Search Topics"></div>
                                <div class="pull-right"><button class="btn btn-default" type="button"><i class="fa fa-search"></i></button></div>
                                <div class="clearfix"></div>
                            </form>
                        </div>
                    </div>
                    <div class="col-lg-4 col-xs-12 col-sm-5 col-md-4 avt">
                        <div class="stnt pull-left">
                                <button class="btn btn-primary donate-box-btn">Start New Topic</button>
                        </div>
                        <div class="env pull-left"><i class="fa fa-envelope"></i></div>
                        {% if (app.user) %}
                        <div class="avatar pull-left dropdown">
                            <a data-toggle="dropdown" href="/forum/#"><img style="width: 40px;height: 40px;" src="/forum/images/avatar/{{ app.user.picturePath }}" alt="" /></a> <b class="caret"></b>
                            <div class="status green">&nbsp;</div>
                            <ul class="dropdown-menu" role="menu">
                                <li role="presentation"><a role="menuitem" tabindex="-1" href="/forum/#">My Profile</a></li>
                                <li role="presentation"><a role="menuitem" tabindex="-2" href="/forum/#">Inbox</a></li>
                                <li role="presentation"><a role="menuitem" tabindex="-3" href="/forum/#">Log Out</a></li>
                                <li role="presentation"><a role="menuitem" tabindex="-4" href="/forum/04_new_account.html">Create account</a></li>
                            </ul>
                        </div>
                            {% else %}
                                <div class="avatar pull-left dropdown">
                                    <a data-toggle="dropdown" href="/forum/#"><img src="/forum/images/avatar.jpg" alt="" /></a> <b class="caret"></b>
                                    <div class="status green">&nbsp;</div>
                                </div>
                        {% endif %}

                        <div class="clearfix"></div>
                    </div>
                </div>
            </div>
        </div>

        {% block content %}{% endblock %}

    </div>

{% endblock %}
{% block jsIncludes %}
    <!-- get jQuery from the google apis -->
    <script type="text/javascript" src="/forum/../ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.js"></script>


    <!-- SLIDER REVOLUTION 4.x SCRIPTS  -->
    <script type="text/javascript" src="/forum/rs-plugin/js/jquery.themepunch.plugins.min.js"></script>
    <script type="text/javascript" src="/forum/rs-plugin/js/jquery.themepunch.revolution.min.js"></script>

    <script src="/forum/js/bootstrap.min.js"></script>
    <script src="{{asset('frontTemp/js/jquery.js')}}"></script>
    <!-- bootstrap js -->
    <script src="{{asset('frontTemp/js/bootstrap.min.js')}}"></script>
    <!-- jQuery ui js -->
    <script src="{{asset('frontTemp/js/jquery-ui.js')}}"></script>
    <!-- owl carousel js -->
    <script src="{{asset('frontTemp/js/owl.carousel.min.js')}}"></script>
    <!-- jQuery validation -->
    <script src="{{asset('frontTemp/js/jquery.validate.min.js')}}"></script>
    <!-- google map -->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCRvBPo3-t31YFk588DpMYS6EqKf-oGBSI"></script>
    <script src="{{asset('frontTemp/js/gmap.js')}}"></script>
    <!-- mixit up -->
    <script src="{{asset('frontTemp/js/wow.js')}}"></script>
    <script src="{{asset('frontTemp/js/jquery.mixitup.min.js')}}"></script>
    <script src="{{asset('frontTemp/js/jquery.fitvids.js')}}"></script>
    <script src="{{asset('frontTemp/js/bootstrap-select.min.js')}}"></script>

    <!-- revolution slider js -->
    <script src="{{asset('frontTemp/assets/revolution/js/jquery.themepunch.tools.min.js')}}"></script>
    <script src="{{asset('frontTemp/assets/revolution/js/jquery.themepunch.revolution.min.js')}}"></script>
    <script src="{{asset('frontTemp/assets/revolution/js/extensions/revolution.extension.actions.min.js')}}"></script>
    <script src="{{asset('frontTemp/assets/revolution/js/extensions/revolution.extension.carousel.min.js')}}"></script>
    <script src="{{asset('frontTemp/assets/revolution/js/extensions/revolution.extension.kenburn.min.js')}}"></script>
    <script src="{{asset('frontTemp/assets/revolution/js/extensions/revolution.extension.layeranimation.min.js')}}"></script>
    <script src="{{asset('frontTemp/assets/revolution/js/extensions/revolution.extension.migration.min.js')}}"></script>
    <script src="{{asset('frontTemp/assets/revolution/js/extensions/revolution.extension.navigation.min.js')}}"></script>
    <script src="{{asset('frontTemp/assets/revolution/js/extensions/revolution.extension.parallax.min.js')}}"></script>
    <script src="{{asset('frontTemp/assets/revolution/js/extensions/revolution.extension.slideanims.min.js')}}"></script>
    <script src="{{asset('frontTemp/assets/revolution/js/extensions/revolution.extension.video.min.js')}}"></script>

    <!-- fancy box -->
    <script src="{{asset('frontTemp/js/jquery.fancybox.pack.js')}}"></script>
    <script src="{{asset('frontTemp/js/jquery.polyglot.language.switcher.js')}}"></script>
    <script src="{{asset('frontTemp/js/nouislider.js')}}"></script>
    <script src="{{asset('frontTemp/js/jquery.bootstrap-touchspin.js')}}"></script>
    <script src="{{asset('frontTemp/js/SmoothScroll.js')}}"></script>
    <script src="{{asset('frontTemp/js/jquery.appear.js')}}"></script>
    <script src="{{asset('frontTemp/js/jquery.countTo.js')}}"></script>
    <script src="{{asset('frontTemp/js/jquery.flexslider.js')}}"></script>
    <script src="{{asset('frontTemp/js/imagezoom.js')}}"></script>
    <script src="{{asset('frontTemp/js/isotope.js')}}"></script>
    <script src="{{asset('frontTemp/js/validation.js')}}"></script>
    <script id="map-script" src="{{asset('frontTemp/js/default-map.js')}}"></script>

    <script src="{{asset('frontTemp/js/jquery.ptTimeSelect.js')}}"></script>
    <script src="{{asset('frontTemp/js/custom.js')}}"></script>
    <!-- LOOK THE DOCUMENTATION FOR MORE INFORMATIONS -->


    <!-- END REVOLUTION SLIDER -->

    <script type="text/javascript">


        var revapi;

        jQuery(document).ready(function() {
            "use strict";
            revapi = jQuery('.tp-banner').revolution(
                {
                    delay: 15000,
                    startwidth: 1200,
                    startheight: 278,
                    hideThumbs: 10,
                    fullWidth: "on"
                });

        });	//ready
    </script>
    <script>
        function mySearch() {


            var dat = $("#searchInput").val();
            $.ajax({
                url:        '/forum/search/'+dat,
                type:       'GET',
                dataType:   'json',
                async:      true,

                success: function(data, status) {
                    console.log(data);
                    $("#postsContainer").empty();
                    $("#postsContainer").append(
                        "<br>\n" +
                        "            <h1 class=\"title\" style=\"color: #0a6ebd; text-decoration: underline;\">Posts</h1>\n" +
                        "                <br>\n"
                    );
                    $.each( data, function( key, value ) {
                       // alert( key + ": " + value.subject );
                        $("#postsContainer").append(
                            "<div class=\"post\">\n" +
                            "                            <div class=\"wrap-ut pull-left\">\n" +
                            "                                <div class=\"userinfo pull-left\">\n" +
                            "                                    <div class=\"avatar\">\n" +
                            "                                        <img src=\"/forum/images/avatar/"+value.picture+"\" alt=\"\" />\n" +
                            "                                        <div class=\"status green\">&nbsp;</div>\n" +
                            "                                    </div>\n" +
                            "                                    <a href=\"02_topic.html\">"+value.user+"'s posts</a>\n" +
                            "                                </div>\n" +
                            "                                <div class=\"posttext pull-left\">\n" +
                            "                                    <h2><a href=\"/forum/view/"+value.id+"\">"+value.subject+"</a></h2>\n" +
                            "                                    <p>"+value.description+" </p>\n" +
                            "                                </div>\n" +
                            "                                <div class=\"clearfix\"></div>\n" +
                            "                            </div>\n" +
                            "                            <div class=\"postinfo pull-left\">\n" +
                            "                                <div class=\"comments\">\n" +
                            "                                    <div class=\"commentbg\">\n" +
                            "                                        560\n" +
                            "                                        <div class=\"mark\"></div>\n" +
                            "                                    </div>\n" +
                            "\n" +
                            "                                </div>\n" +
                            "                                <div class=\"views\"><i class=\"fa fa-eye\"></i> 1,568</div>\n" +
                            "                                <div class=\"time\"><i class=\"fa fa-clock-o\"></i> 24 min</div>\n" +
                            "                            </div>\n" +
                            "                            <div class=\"clearfix\"></div>\n" +
                            "                        </div>"
                        );

                    });
                },
                error : function(xhr, textStatus, errorThrown) {
                    alert('Ajax request failed.');
                }
            });
        }
        $(function() {
            var knp = new KnpPaginatorAjax();

            knp.init({
                'loadMoreText': 'Load More', //load more text
                'loadingText': 'Loading..', //loading text
                'elementsSelector': '#postsContainer', //this is where the script will append and search results
                'paginationSelector': 'ul.pagination', //pagination selector
            });
        });
    </script>
{% endblock %}